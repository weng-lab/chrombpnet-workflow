working-dir = "projects/chrombpnet/psychencode/GWAS/MDD"

google {
    bucket = "gcp.wenglab.org"
    project-id = "devenv-215523"
    regions = ["us-central1", "us-west1", "us-west2", "asia-northeast1", "asia-northeast3", "asia-south1", "asia-southeast1". "australia-southeast1"]
    zones = [
      "us-central1-a", "us-central1-b",
      "us-west1-a", "us-west1-b", "us-west2-b", "us-west2-c",
      "asia-northeast1-a", "asia-northeast1-c",
      "asia-northeast3-b", "asia-northeast3-c",
      "asia-south1-a", "asia-south1-b",
      "asia-southeast1-a", "asia-southeast1-b", "asia-southeast1-c",
      "australia-southeast1-a", "australia-southeast1-c"
    ]
    job-completion-poll-interval = 120
    log-upload-interval = 120
}

params {
  inputs = [
    {
      name = "MDD"
      -type = "model.IndividualPredictionInput"
      models = [
        {
          name = "Astrocyte_1"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Astrocyte_1/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Astrocyte_1/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Astrocyte_1/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "GABAergic_Neuron_1"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_1/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_1/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_1/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "GABAergic_Neuron_2"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_2/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_2/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_GABAergic_Neuron_2/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "Glutaminergic_Neuron_1"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_1/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_1/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_1/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "Glutaminergic_Neuron_2"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_2/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_2/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Glutaminergic_Neuron_2/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "Microglia"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Microglia/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Microglia/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Microglia/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "Oligodendrocyte"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "Oligodendrocyte_Precursor"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte_Precursor/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte_Precursor/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/adult-cerebrum-single-cell/model_Oligodendrocyte_Precursor/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "PTM_glia"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_glia/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_glia/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_glia/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "PTM_neurons"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_neurons/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_neurons/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/PTM_neurons/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "VLPFC_glia"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_glia/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_glia/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_glia/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }, {
          name = "VLPFC_neurons"
          chrom-bp-net-model-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_neurons/models/chrombpnet.h5"
            path = "chrombpnet.h5"
          }
          chrom-bp-net-model-bias-corrected-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_neurons/models/chrombpnet_nobias.h5"
            path = "chrombpnet_nobias.h5"
          }
          chrom-bp-net-model-bias-scaled-h5 {
            -type = "krews.file.HttpInputFile"
            url = "gs://gcp.wenglab.org/projects/chrombpnet/psychencode/VLPFC_neurons/models/bias_model_scaled.h5"
            path = "bias_model_scaled.h5"
          }
        }
      ]
      evaluation-regions {
        -type = "krews.file.HttpInputFile"
        url = "http://gcp.wenglab.org/projects/chrombpnet/psychencode/GWAS/MDD.prediction-regions.bed"
        path = "prediction-regions.bed"
      }
      sequences = [{
        name = "risk"
        file {
          -type = "krews.file.HttpInputFile"
          url = "http://gcp.wenglab.org/projects/chrombpnet/psychencode/GWAS/MDD.risk.2bit"
          path = "risk.2bit"
        }
      }, {
        name = "protective"
        file {
          -type = "krews.file.HttpInputFile"
          url = "http://gcp.wenglab.org/projects/chrombpnet/psychencode/GWAS/MDD.protective.2bit"
          path = "protective.2bit"
        }
      }]
    }
  ]
}

task.individual-predict {
  google {
    machine-type = "n1-standard-8"
    gpus {
      gpu-type = "nvidia-tesla-t4"
      gpu-count = 1
    }
    boot-disk-size-gb = 500
  }
  params {
    tqdm = 1
  }
}
